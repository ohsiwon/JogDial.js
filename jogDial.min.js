!function(o,a){"use strict";var c=function(t,e){return new c.Instance(t,e||{})};function l(t,e,n){e*=c.ToRad;var o=Math.cos(e)*t.radius+t.center.x,i=Math.sin(e)*t.radius+t.center.y,r=c.utils.getQuadrant(o,i);c.utils.convertUnitToClock(e);t.knob.style.left=o+"px",t.knob.style.top=i+"px",t.knob.rotation==a&&c.utils.extend(t.knob,{rotation:t.opt.degreeStartAt,degree:c.utils.convertUnitToClock(e)}),n&&(t.info.now=c.utils.extend({},{rotation:n,quadrant:r}),t.info.old=c.utils.extend({},{rotation:n%360,quadrant:r}),c.utils.extend(t.knob,{rotation:n,degree:n%360})),c.utils.triggerEvent(t.knob,c.CustomEvent.MOUSE_MOVE)}c.Instance=function(t,e){return t.getAttribute("_jogDial_")?(o.alert("Please Check your code:\njogDial can not be initialized twice in a same element."),!1):(c.Ready||(c.Doc=o.document,c.ToRad=Math.PI/180,c.ToDeg=180/Math.PI,c.ModernEvent=!!c.Doc.addEventListener,c.MobileRegEx="/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/",c.MobileEvent="ontouchstart"in o&&o.navigator.userAgent.match(c.MobileRegEx),c.PointerEvent=!(!o.navigator.pointerEnabled&&!o.navigator.msPointerEnabled),c.Defaults={debug:!1,touchMode:"knob",knobSize:"30%",wheelSize:"100%",zIndex:9999,degreeStartAt:0,minDegree:null,maxDegree:null},c.DegInfo={rotation:0,quadrant:1},c.DomEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup"},c.CustomEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup"},c.utils={extend:function(t,e){for(var n in e)t[n]=e[n];return t},getComputedStyle:function(t,e){return o.getComputedStyle?o.getComputedStyle(t).getPropertyValue(e):t.currentStyle?t.currentStyle[e]:void 0},getCoordinates:function(t){var e=((t=t||o.event).target||t.srcElement).getBoundingClientRect();return{x:(c.MobileEvent?t.targetTouches[0]:t).clientX-e.left,y:(c.MobileEvent?t.targetTouches[0]:t).clientY-e.top}},getQuadrant:function(t,e){return 0<t&&0<e?4:t<0&&0<e?3:t<0&&e<0?2:0<=t&&e<0?1:void 0},getRotation:function(t,e,n){var o=0,t=t.info;return 1==e&&2==t.old.quadrant?o=360:2==e&&1==t.old.quadrant&&(o=-360),o=n+o-t.old.rotation+t.now.rotation,t.old.rotation=n,t.old.quadrant=e,o},checkBoxCollision:function(t,e){return t.x1<e.x&&t.x2>e.x&&t.y1<e.y&&t.y2>e.y},addEvent:function(t,e,n,o){e=e.split(" ");for(var i=0;i<e.length;i++)t.addEventListener?t.addEventListener(e[i],n,o):t.attachEvent&&t.attachEvent("on"+e[i],n)},removeEvent:function(t,e,n){e=e.split(" ");for(var o=0;o<e.length;o++)t.addEventListener?t.removeEventListener(e[o],n):t.detachEvent&&t.detachEvent("on"+e[o],n)},triggerEvent:function(t,e){var n;c.Doc.createEvent?((n=c.Doc.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)):((n=c.Doc.createEventObject()).target={},c.utils.extend(n.target,t),t.fireEvent("on"+e,n))},convertClockToUnit:function(t){return t%360-90},convertUnitToClock:function(t){return-180<=t&&t<-90?450+t:90+t}},c.Ready=!0),n=t,t=e,(e=this).base=n,e.base.setAttribute("_JogDial_",!0),e.opt=c.utils.extend(c.utils.extend({},c.Defaults),t),e.info={},e.info.now=c.utils.extend({},c.DegInfo),e.info.old=c.utils.extend({},c.DegInfo),e.info.snapshot=c.utils.extend({},e.info),e.info.snapshot.direction=null,function(t){var e,n={},o=t.base.id||"",i=t.base.clientWidth,r=t.base.clientHeight,s=t.opt,a=n.knob=document.createElement("div"),l=n.wheel=document.createElement("div"),u=a.style,d=l.style;"static"===c.utils.getComputedStyle(t.base,"position")&&(t.base.style.position="relative");t.base.appendChild(a),t.base.appendChild(l),c.utils.extend(t,n),u.position=d.position="absolute",u.width=u.height=s.knobSize,d.width=d.height=s.wheelSize,e=a.clientWidth/2,n=l.clientWidth/2,o&&a.setAttribute("id",o+"_knob");a.className="jog_dial_knob",u.margin=-e+"px 0 0 "+-e+"px",u.zIndex=s.zIndex,o&&l.setAttribute("id",o+"_wheel");l.className="jog_dial_wheel",i=(i-l.clientWidth)/2,l=(r-l.clientHeight)/2,d.left=d.top=0,d.margin=l+"px 0 0 "+i+"px",d.zIndex=s.zIndex,t.radius=n-e,t.center={x:n+i,y:n+l},s.debug&&function(t){var e=t.knob.style,t=t.wheel.style;e.backgroundColor="#00F",t.backgroundColor="#0F0",e.opacity=t.opacity=.4,e.filter=t.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=40)",e.webkitBorderRadius=t.webkitBorderRadius="50%",e.borderRadius=t.borderRadius="50%"}(t)}(this),function(o){c.PointerEvent?c.utils.extend(c.DomEvent,{MOUSE_DOWN:"pointerdown MSPointerDown",MOUSE_MOVE:"pointermove MSPointerMove",MOUSE_OUT:"pointerout MSPointerOut",MOUSE_UP:"pointerup pointercancel MSPointerUp MSPointerCancel"}):c.MobileEvent&&c.utils.extend(c.DomEvent,{MOUSE_DOWN:"touchstart",MOUSE_MOVE:"touchmove",MOUSE_OUT:"touchleave",MOUSE_UP:"touchend"});var i=o.opt,r=o.info,e=o.knob,s=o.wheel;function n(t){var e,n;o.pressed&&(t.preventDefault?t.preventDefault():t.returnValue=!1,n=(e=c.utils.getCoordinates(t)).x-o.center.x+s.offsetLeft,t=e.y-o.center.y+s.offsetTop,e=Math.atan2(t,n)*c.ToDeg,n=c.utils.getQuadrant(n,t),t=c.utils.convertUnitToClock(e),r.now.rotation=c.utils.getRotation(o,n==a?r.old.quadrant:n,t),n=r.now.rotation,null!=i.maxDegree&&i.maxDegree<=n?(null==r.snapshot.direction&&(r.snapshot.direction="right",r.snapshot.now=c.utils.extend({},r.now),r.snapshot.old=c.utils.extend({},r.old)),n=i.maxDegree,e=c.utils.convertClockToUnit(n),t=c.utils.convertUnitToClock(e)):null!=i.minDegree&&i.minDegree>=n?(null==r.snapshot.direction&&(r.snapshot.direction="left",r.snapshot.now=c.utils.extend({},r.now),r.snapshot.old=c.utils.extend({},r.old)),n=i.minDegree,e=c.utils.convertClockToUnit(n),t=c.utils.convertUnitToClock(e)):null!=r.snapshot.direction&&(r.snapshot.direction=null),c.utils.extend(o.knob,{rotation:n,degree:t}),l(o,e))}function t(){o.pressed&&(o.pressed=!1,null!=o.info.snapshot.direction&&(o.info.now=c.utils.extend({},r.snapshot.now),o.info.old=c.utils.extend({},r.snapshot.old),o.info.snapshot.direction=null),c.utils.triggerEvent(o.knob,c.CustomEvent.MOUSE_UP))}o.pressed=!1,c.utils.addEvent(s,c.DomEvent.MOUSE_DOWN,function(t){switch(i.touchMode){case"knob":default:o.pressed=c.utils.checkBoxCollision({x1:e.offsetLeft-s.offsetLeft,y1:e.offsetTop-s.offsetTop,x2:e.offsetLeft-s.offsetLeft+e.clientWidth,y2:e.offsetTop-s.offsetTop+e.clientHeight},c.utils.getCoordinates(t));break;case"wheel":o.pressed=!0,n(t)}o.pressed&&c.utils.triggerEvent(o.knob,c.CustomEvent.MOUSE_DOWN)},!1),c.utils.addEvent(s,c.DomEvent.MOUSE_MOVE,n,!1),c.utils.addEvent(s,c.DomEvent.MOUSE_UP,t,!1),c.utils.addEvent(s,c.DomEvent.MOUSE_OUT,t,!1)}(this),l(this,c.utils.convertClockToUnit(this.opt.degreeStartAt)),this);var n},c.Instance.prototype={on:function(t,e){return c.utils.addEvent(this.knob,t,e,!1),this},off:function(t,e){return c.utils.removeEvent(this.knob,t,e),this},trigger:function(t,e){return"angle"===t?l(this,c.utils.convertClockToUnit(e),e):o.alert("Please Check your code:\njogDial does not have triggering event ["+t+"]"),this},angle:function(t){t=t>this.opt.maxDegree?this.opt.maxDegree:t;l(this,c.utils.convertClockToUnit(t),t)}},"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof exports?module.exports=c:o.JogDial=c}(window);